var GANTT_DEFAULT_CONFIG={BOXWIDTH:30,BOXHEIGHT:30,titleWidth:200,chartHeight:400,title:"Simple Gantt"},GanttUtils=function(){"use strict";return{addDays:function(t,e){var a=new Date(t);return a.setDate(a.getDate()+e),a},calculateDaysDiff:function(t,e){var a=t.getTime(),n=e.getTime(),i=Math.abs(a-n);return Math.ceil(i/864e5)},calculateDiffMonth:function(t,e){var a=t.getMonth(),n=t.getFullYear(),i=e.getMonth(),l=e.getFullYear();return 12*Math.abs(l-n)+Math.abs(i-a)},getTitleWidth:function(t){return t.titleWidth||GANTT_DEFAULT_CONFIG.titleWidth},getBoxWidth:function(t){var e=t.boxWidth||GANTT_DEFAULT_CONFIG.BOXWIDTH;return e+=1}}}(),HeaderPanel=function(t){"use strict";var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=function(t,e,a){var n=GanttUtils.calculateDaysDiff(a.scope.startDate,a.scope.endDate),i=GanttUtils.getTitleWidth(e),l=GanttUtils.getBoxWidth(e)*n+i;return t.style.width=l+2+"px",t},n=function(e){var a=document.createElement("div"),n=GanttUtils.getTitleWidth(e);a.style.width=n+"px",a.classList.add("title-container");var i=e.title||t.title,l=document.createTextNode(i);return a.appendChild(l),a},i=function(t,e,a){var n=document.createElement("div"),i=GanttUtils.getTitleWidth(t);n.classList.add("header-daterange-panel"),n.style.left=i+"px";var r=document.createElement("div");r.classList.add("clear-both");var d=l(t,e,a);return n.appendChild(d.monthRangePanel),n.appendChild(r),n.appendChild(d.dayRangePanel),n},l=function(t,e,a){for(var n,i=document.createElement("div"),l=document.createElement("div"),s=GanttUtils.calculateDaysDiff(e,a),c=e.getMonth(),o=0,u=0;u<s;u++){var h=GanttUtils.addDays(e,u),p=h.getMonth(),f=r(h);l.appendChild(f);var v=GanttUtils.getBoxWidth(t);if(p!==c){g=d(n,o);i.appendChild(g),o=v}else o+=v;c=p,n=h}var g=d(a,o);return i.appendChild(g),{monthRangePanel:i,dayRangePanel:l}},r=function(t){var e=document.createElement("div");e.classList.add("day-box");var a=document.createTextNode(t.getDate());return e.appendChild(a),e},d=function(t,a){var n=document.createElement("div");n.classList.add("monthyear-box");var i=document.createTextNode(e[t.getMonth()]+" "+t.getFullYear());return n.appendChild(i),n.style.width=a-1+"px",n};return{generate:function(t,e){var l=document.createElement("div");l.classList.add("header-panel"),l=a(l,t,e);var r=n(t),d=i(t,e.scope.startDate,e.scope.endDate);return l.appendChild(r),l.appendChild(d),l}}}(GANTT_DEFAULT_CONFIG),BodyPanel=function(t){"use strict";var e=function(t,e,a){var n=GanttUtils.calculateDaysDiff(a.scope.startDate,a.scope.endDate),i=GanttUtils.getTitleWidth(e),l=GanttUtils.getBoxWidth(e)*n+i;return t.style.width=l+"px",t},a=function(e,a){var n=(a.height||t.chartHeight)-60;return e.style.height=n+"px",e},n=function(e,a){var n=document.createElement("div"),i=GanttUtils.getTitleWidth(e);return n.style.width=i+"px",n.style.height=t.BOXHEIGHT*a.gantt.length,n.classList.add("left-panel"),a.gantt.forEach(function(t){var a=document.createElement("div"),i=GanttUtils.getTitleWidth(e);a.style.width=i-6+"px",a.classList.add("data-left-box"),a.innerHTML=t.titleHtmlElem+" "+t.title,n.appendChild(a)}),n},i=function(e,a){console.log(a);var n=GanttUtils.getTitleWidth(e),i=GanttUtils.getBoxWidth(e),l=document.createElement("div");l.style.left=n+"px",l.classList.add("chart-panel");var r=i*GanttUtils.calculateDaysDiff(a.scope.startDate,a.scope.endDate);return l.style.width=r+"px",l.style.height=(t.BOXHEIGHT+2)*a.gantt.length+"px",l},l=function(e,a,n,i){GanttUtils.getTitleWidth(a);return n.gantt.forEach(function(l,c){var o=c*(t.BOXHEIGHT+1);o+=3,l.dates.forEach(function(t){var i=d(a,t,o,n.scope.startDate);if(e.appendChild(i),t.desc){var l=s(a,t,o,n.scope.startDate);e.appendChild(l)}});var u=r(a,l.title,o,n,c,i);e.appendChild(u)}),e},r=function(e,a,n,i,l,r){var d=GanttUtils.getBoxWidth(e)*GanttUtils.calculateDaysDiff(i.scope.startDate,i.scope.endDate),s=document.createElement("div");if(s.style.position="absolute",s.style.top=n+"px",s.style.width=d+"px",s.style.height=t.BOXHEIGHT+"px",i.onClick){s.addEventListener("click",function(){i.onClick(l)})}return s},d=function(t,e,a,n){var i=c(t,e,n),l=i.end-i.start-9,r=document.createElement("div");r.classList.add("bar"),r.classList.add("wrap-text-with-dots"),e.class&&r.classList.add(e.class),r.style.backgroundColor=e.color,r.style.width=l+"px",r.style.left=i.start+"px",r.style.top=a+"px";var d=document.createTextNode(e.label);return r.appendChild(d),e.onClick&&r.addEventListener("click",e.onClick),r},s=function(e,a,n,i){var l=c(e,a,i),r=document.createElement("div");return r.classList.add("desc-box"),r.style.top=n+t.BOXHEIGHT+"px",r.innerHTML=a.desc,r.style.left=l.start+10+"px",r},c=function(t,e,a){var n=GanttUtils.getBoxWidth(t);return{start:GanttUtils.calculateDaysDiff(a,e.startDate)*n+2,end:(GanttUtils.calculateDaysDiff(a,e.endDate)+1)*n}};return{generate:function(t,r,d){var s=document.createElement("div");s.classList.add("data-panel"),s=e(s,t,r),s=a(s,t,r);var c=n(t,r),o=i(t,r),u=l(o,t,r,d);return s.appendChild(c),s.appendChild(u),s}}}(GANTT_DEFAULT_CONFIG),SimpleGantt=function(t,e){"use strict";var a=function(t){return t.classList.add("main-container"),t};return{generate:function(n,i,l){var r=document.querySelector(n);if(r){for(;r.firstChild;)r.removeChild(r.firstChild);r=a(r);var d=t.generate(i,l),s=e.generate(i,l,n);r.appendChild(d),r.appendChild(s),r.addEventListener("scroll",function(t){console.log("scroll"),document.querySelector(".left-panel").style.left=this.scrollLeft+"px"})}}}}(HeaderPanel,BodyPanel);